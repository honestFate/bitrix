<?php
/**
 * Конфигурация прав доступа к вкладкам CRM с Highload-блоками
 * 
 * Этот файл подключается в /local/php_interface/init.php
 * 
 * Возвращаемый массив содержит правила доступа для каждой вкладки
 */

return [
    // Конфигурация для вкладки "Торговые точки"
    'tab_outlets' => [
        // Группы пользователей с доступом (ID групп)
        // Если не указано - доступ для всех
        'user_groups' => [1, 5, 6], // Администраторы, менеджеры, руководители
        
        // Разрешенные действия для вкладки
        'actions' => ['READ', 'WRITE', 'DELETE'],
        
        // Если вкладка включает несколько блоков (пример)
        // 'blocks' => [
        //     'hl_block_5' => ['READ', 'WRITE'], // Торговые точки
        //     'hl_block_6' => ['READ'],          // Дополнительная информация
        // ],
        
        // Кастомная функция проверки (опционально)
        // 'callback' => function($userId, $tabCode, $action) {
        //     // Своя логика проверки
        //     return true;
        // }
    ],
    
    // Пример конфигурации для вкладки с несколькими блоками
    'tab_contracts' => [
        'user_groups' => [1, 5, 7], // Только определенные группы
        'actions' => ['READ', 'WRITE'],
        
        // Разграничение доступа к блокам внутри вкладки
        'blocks' => [
            'hl_block_10' => ['READ', 'WRITE'],  // Основные договоры - полный доступ
            'hl_block_11' => ['READ'],            // Финансовая информация - только чтение
            'info_block_20' => ['READ'],          // Инфоблок с документами - только чтение
        ],
    ],
    
    // Ограничения на уровне полей
    'field_restrictions' => [
        // Для Highload-блока с ID 5 (Торговые точки)
        'hl_block_5' => [
            'UF_ADDRESS' => [
                // Поле доступно для всех, кто имеет доступ к вкладке
                'actions' => ['READ', 'WRITE'],
            ],
            // Пример ограничения на конкретное поле
            // 'UF_REVENUE' => [
            //     'required_groups' => [1, 7], // Только администраторы и финансисты
            //     'actions' => ['READ'],       // Только чтение
            // ],
        ],
        
        // Пример для другого HL-блока
        'hl_block_10' => [
            'UF_CONTRACT_NUMBER' => [
                'actions' => ['READ', 'WRITE'],
            ],
            'UF_AMOUNT' => [
                'required_groups' => [1, 5, 7], // Только определенные группы
                'actions' => ['READ', 'WRITE'],
            ],
            'UF_COMMISSION' => [
                'required_groups' => [1, 7],    // Только администраторы и финансисты
                'denied_groups' => [8],          // Исключаем группу 8
                'actions' => ['READ'],           // Только чтение
            ],
        ],
    ],
    
    // Пример вкладки, доступной только администраторам
    'tab_financial' => [
        'user_groups' => [1], // Только администраторы
        'actions' => ['READ', 'WRITE', 'DELETE'],
    ],
    
    // Пример вкладки только для чтения
    'tab_history' => [
        'user_groups' => [1, 5, 6, 7, 8], // Все группы
        'actions' => ['READ'], // Только просмотр
    ],
];